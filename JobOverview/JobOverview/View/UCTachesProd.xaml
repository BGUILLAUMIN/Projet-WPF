<UserControl x:Class="JobOverview.View.UCTachesProd"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                xmlns:local="clr-namespace:JobOverview"
				xmlns:vw="clr-namespace:JobOverview.View"
				xmlns:vm="clr-namespace:JobOverview.ViewModel"
                xmlns:fa="http://schemas.awesome.incremented/wpf/xaml/fontawesome.sharp"
                xmlns:properties="clr-namespace:JobOverview.Properties"
                xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
               
             mc:Ignorable="d" 
             d:DesignHeight="400" d:DesignWidth="500">
    <!--définition des ressources-->
    <UserControl.Resources>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="2"/>
        </Style>
    </UserControl.Resources>


    <DockPanel Margin="5">
        <!--#region Expander Ajout de Taches de production-->
        <Expander ExpandDirection="Left" MaxWidth="250" DockPanel.Dock="Right" IsExpanded="True">
            <Expander.ToolTip>
                <ToolTip>
                    <TextBlock>Déplier la fiche de détails.</TextBlock>
                </ToolTip>
            </Expander.ToolTip>
            <StackPanel>
                <!--#region Barre de boutons-->
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Top">
                    <Button Style="{StaticResource ButtonStyle}" Command="{Binding CmdAjouter}">
                        <fa:IconBlock Icon="PlusCircle"/>
                        <Button.ToolTip>
                            <ToolTip>
                                <TextBlock>Ajouter une tâche de production.</TextBlock>
                            </ToolTip>
                        </Button.ToolTip>
                    </Button>
                    <Button Style="{StaticResource ButtonStyle}" Command="{Binding CmdEnregistrer}">
                        <fa:IconBlock Icon="FloppyO"/>
                        <Button.ToolTip>
                            <ToolTip>
                                <TextBlock>Enregistrer la tâche.</TextBlock>
                            </ToolTip>
                        </Button.ToolTip>
                    </Button>
                    <Button Style="{StaticResource ButtonStyle}"  Command="{Binding CmdAnnuler}">
                        <fa:IconBlock Icon="Undo"/>
                        <Button.ToolTip>
                            <ToolTip>
                                <TextBlock>Annuler la création de tâche.</TextBlock>
                            </ToolTip>
                        </Button.ToolTip>
                    </Button>
                </StackPanel>
                <Separator Height="10" Opacity="0" />
                <!--#endregion-->

                <!--#region Zones de saisies-->
                <StackPanel Orientation="Horizontal">
                    <Label Content="N° :"/>
                    <TextBox  Padding="2" Width="20" Text="{Binding Path= TachesProds/Numero}" 
                              IsEnabled="{Binding Path=ModeEdit, Converter={StaticResource ConvModeEditActivation}}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <Label Content="Libellé :"/>
                    <TextBox MinWidth="100" Text="{Binding Path=TachesProds/Libelle}" FontWeight="Bold" IsReadOnly="{Binding Path=ModeEdit, Converter={StaticResource ConvModeEditLectureSeule}}"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <Label Content="Durée Prévue :"/>
                    <TextBox Width="20"  Text="{Binding Path=TachesProds/DureePrevue}" FontWeight="Bold" IsReadOnly="{Binding Path=ModeEdit, Converter={StaticResource ConvModeEditLectureSeule}}"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <Label Content="Durée Restante :"/>
                    <TextBox Width="20" Text="{Binding Path=TachesProds/DureeRestante}" FontWeight="Bold" IsReadOnly="{Binding Path=ModeEdit, Converter={StaticResource ConvModeEditLectureSeule}}"/>
                </StackPanel>
                <Label Content=" Module :" />
                <Grid>

                    <Grid.RowDefinitions>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <TextBlock Width="100" Text="{Binding Path=TachesProds/CodeModule}"  />
                    <ComboBox Visibility="Hidden"   />
                </Grid>

                <Label Content=" Activité :" />
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <TextBlock Width="100" Text="{Binding Path= TachesProds/CodeActivite}"/>
                    <ComboBox  Visibility="Hidden"  />
                </Grid>

                <TextBox MinHeight="50" TextWrapping="Wrap" Text="{Binding Path=TachesProds/Description}" IsReadOnly="{Binding Path=ModeEdit, Converter={StaticResource ConvModeEditActivation}}"/>
            </StackPanel>
            <!--#endregion-->


        </Expander>
        <!--#endregion-->

        <!--#region DockPanel Consultation des Taches de production-->
        <DockPanel>
            <!--#region ligne du bas checkbox + bouton exporté-->
            <DockPanel DockPanel.Dock="Bottom">
                <CheckBox Content="Taches terminées" IsChecked="False" VerticalAlignment="Center" Margin="10,0,0,0">
                    <CheckBox.ToolTip>
                        <ToolTip>
                            <TextBlock>Filtrer les tâches selon leur degré d'avancement.</TextBlock>
                        </ToolTip>
                    </CheckBox.ToolTip>
                </CheckBox>
                <Button Content="XML" Width="100" HorizontalAlignment="Right" Margin="0,0,10,5" Command="{Binding CmdExport}">
                    <Button.ToolTip>
                        <ToolTip>
                            <TextBlock>Exporter toutes les tâches de production au format XML.</TextBlock>
                        </ToolTip>
                    </Button.ToolTip>
                </Button>
            </DockPanel>
            <!--#endregion-->

            <!--#region zone de sélection-->
            <StackPanel Orientation="Horizontal" DockPanel.Dock="Top">
                <StackPanel>
                    <Label Content="Logiciel"/>
                    <ComboBox Name="cbxLogiciels"
                          ItemsSource="{Binding Path=Logiciels}"
                          DisplayMemberPath="Nom"
                          SelectedValuePath="Code"
                          SelectedIndex="0" IsSynchronizedWithCurrentItem="True">
                    <ComboBox.ToolTip>
                        <ToolTip>
                            <TextBlock>Selection du logiciel.</TextBlock>
                        </ToolTip>
                    </ComboBox.ToolTip>
                </ComboBox>
                <ComboBox Name="cbxVersions" Margin="5" 
                          ItemsSource="{Binding Path=Logiciels/Versions}"
                          DisplayMemberPath="Numero"
                          SelectedValuePath="Numero" 
                          IsSynchronizedWithCurrentItem="True">
                        <ComboBox.ToolTip>
                            <ToolTip>
                                <TextBlock>Selection de la version.</TextBlock>
                            </ToolTip>
                        </ComboBox.ToolTip>
                    </ComboBox>
                </StackPanel>
                <StackPanel>
                    <Label Content="Personnes"/>
                    <ComboBox Name="cbxPersonnes" Width="200"
                          ItemsSource="{Binding Path=Personnes}"
                          DisplayMemberPath="NomComplet"
                          SelectedValuePath="Login"
                          SelectedIndex="0"
                          IsEnabled="{Binding Source={x:Static properties:Settings.Default}, Path=ManagerConnecte}">
                        <ComboBox.ToolTip>
                            <ToolTip>
                                <TextBlock>Selection de l'employé.</TextBlock>
                            </ToolTip>
                        </ComboBox.ToolTip>
                    </ComboBox>
                </StackPanel>
            </StackPanel>
            <!--#endregion-->
            <!--#region Affichage des temps de travail-->
            <StackPanel Orientation="Vertical" Margin="10" DockPanel.Dock="Top">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Temps de travail restant global :" MinWidth="175"/>
                    <TextBlock Text="92 h"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Temps de travail réalisé global :" MinWidth="175"/>
                    <TextBlock Text="102 h"/>
                </StackPanel>
            </StackPanel>
            <!--#endregion-->

            <!--#region Liste d'affichage-->
            <ListView Margin="10" ItemsSource="{Binding TachesProds}" IsSynchronizedWithCurrentItem="True" IsEnabled="{Binding Path=ModeEdit, Converter={StaticResource ConvModeEditLectureSeule}}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Numéro" DisplayMemberBinding="{Binding Path=Numero}"/>
                        <GridViewColumn Header="Libellé" DisplayMemberBinding="{Binding Path=Libelle}" />
                        <GridViewColumn Header="Code Module" DisplayMemberBinding="{Binding Path= CodeModule}" />
                    </GridView>
                </ListView.View>
            </ListView>
            <!--#endregion-->
        </DockPanel>


    </DockPanel>
</UserControl>
